<div class="employee-form-container">
  <h2>{{ isEditMode ? 'Edit Employee' : 'Add Employee' }}</h2>

  <form [formGroup]="employeeForm" (ngSubmit)="onSubmit()">

    <!-- Full Name -->
    <div class="form-group">
      <label>Full Name</label>
      <input formControlName="fullName" placeholder="Enter full name">
      <div class="error" *ngIf="employeeForm.controls['fullName'].touched && employeeForm.controls['fullName'].invalid">
        Full name is required
      </div>
    </div>

    <!-- Email -->
  <!-- Email -->
<div class="form-group">
  <label>Email</label>
  <input formControlName="email">

  <div class="error">
    <div *ngIf="employeeForm.controls['email'].errors?.['required']">
      Email is required
    </div>
    <div *ngIf="employeeForm.controls['email'].errors?.['email']">
      Invalid email format
    </div>
<div *ngIf="submissionError" class="error">
  {{ submissionError }}
</div>
    <div *ngIf="employeeForm.controls['email'].errors?.['serverError']">
      {{ employeeForm.controls['email'].errors?.['serverError'] }}
    </div>
  </div>
</div>

<div class="form-group">
  <label>Mobile</label>
  <input formControlName="mobile">

  <div class="error" *ngIf="employeeForm.controls['mobile'].touched">

    <div *ngIf="employeeForm.controls['mobile'].errors?.['required']">
      Mobile number is required
    </div>

    <div *ngIf="employeeForm.controls['mobile'].errors?.['pattern']">
      Mobile must be a valid 11-digit Egyptian number
    </div>

  </div>
</div>


  

    <div class="form-group">
      <label>Date of Birth</label>
      <input type="date" formControlName="dateOfBirth">
    </div>

    <div class="form-group">
      <label>Department</label>
      <select formControlName="departmentId">
        <option value="">-- Select Department --</option>
        <option *ngFor="let dept of departments" [value]="dept.id">
          {{ dept.name }}
        </option>
      </select>

      <div class="error" *ngIf="employeeForm.controls['departmentId'].touched && employeeForm.controls['departmentId'].invalid">
        Department is required
      </div>
    </div>

    <div class="form-group">
      <label>Job Title</label>
      <select formControlName="jobTitleId">
        <option value="">-- Select Job Title --</option>
        <option *ngFor="let job of jobTitles" [value]="job.id">
          {{ job.name }}
        </option>
      </select>

      <div class="error" *ngIf="employeeForm.controls['jobTitleId'].touched && employeeForm.controls['jobTitleId'].invalid">
        Job title is required
      </div>
    </div>

   
    <div class="form-actions">
      <button class="btn btn-success" type="submit" [disabled]="employeeForm.invalid">
        {{ isEditMode ? 'Update' : 'Add' }}
      </button>
      <button type="button" routerLink="/employees" class="btn btn-secondary">
        Cancel
      </button>
    </div>

  </form>
</div>
